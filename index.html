<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BlackTea POS v8</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header style="display:flex;justify-content:space-between;align-items:center;padding:8px 0">
      <h1 id="brand" style="cursor:pointer">BlackTea POS</h1>
      <div style="display:flex;gap:8px;align-items:center">
        <button class="btn btn-light" onclick="openHistory()" title="Lแปch sแปญ">๐</button>
        <button class="btn btn-light" onclick="openSettings()" title="Cรi ฤแบทt">โ๏ธ</button>
      </div>
    </header>

<main id="table-screen">
  <div class="guest-buttons">
    <button id="guest-btn" class="btn btn-primary">+ Khรกch vรฃng lai</button>
    <button id="guest-visit-btn" class="btn btn-primary">+ Khรกch ghรฉ quรกn</button>
  </div>

  <h2>Bรn ฤang phแปฅc vแปฅ</h2>
  <div id="tables" class="table-grid"></div>
</main>

    <main id="menu-screen" style="display:none">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
        <button class="btn btn-light" onclick="backToTables()">โ Quay lแบกi</button>
        <h2 id="table-title" style="margin:0"></h2>
      </div>

      <div id="category-bar" class="category-bar"></div>

      <div id="menu-list" class="menu-list" style="display:none"></div>

      <section class="cart-section">
        <h3>Hรณa ฤฦกn</h3>
        <ul id="cart-list" class="cart-list"></ul>
        <div class="cart-summary">
          <div>Tแปng: <span id="total">0</span> VND</div>
          <div class="cart-actions" id="primary-actions" style="display:none">
            <button id="cancel-order-btn" class="btn btn-action">Hแปงy ฤฦกn</button>
            <button id="save-btn" class="btn btn-action primary">Lฦฐu ฤฦกn</button>
          </div>
          <div class="cart-actions" id="table-actions" style="display:none">
            <button id="addmore-btn" class="btn btn-action">+ Thรชm mรณn</button>
            <button id="pay-btn" class="btn btn-action primary">Thanh toรกn</button>
          </div>
        </div>
      </section>
    </main>

    <main id="payment-screen" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Thanh toรกn - <span id="pay-table-name"></span></h2>
        <button class="btn btn-light" onclick="closePayment()">โ Quay lแบกi</button>
      </div>
      <div id="pay-bill" style="margin-top:8px"></div>
      <div style="margin-top:8px">
        <label>Chiแบฟt khแบฅu: <input id="discount-input" placeholder="0 hoแบทc 5%" /></label>
      </div>
      <div style="margin-top:8px;font-weight:700">Tแปng sau chiแบฟt khแบฅu: <span id="pay-final-total">0</span> VND</div>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn btn-secondary" onclick="closePayment()">Quay lแบกi</button>
        <button class="btn btn-primary" onclick="confirmPayment()">Xuแบฅt hรณa ฤฦกn</button>
      </div>
    </main>

    <main id="settings-screen" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Cรi ฤแบทt</h2>
        <button class="btn btn-light" onclick="backToTables()">โ Quay lแบกi</button>
      </div>
      <div style="margin-top:12px;display:flex;flex-direction:column;gap:8px">
        <button class="settings-line btn btn-secondary" onclick="openMenuSettings()">๐ Cรi ฤแบทt Menu</button>
        <button class="settings-line btn btn-secondary" onclick="openPrinterSettings()">๐จ๏ธ Cรi ฤแบทt Mรกy in</button>
      </div>
    </main>

    <main id="menu-settings-screen" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Cรi ฤแบทt Menu</h2>
        <button class="btn btn-light" onclick="openSettings()">โ Quay lแบกi</button>
      </div>
      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px">
        <div style="flex:1;min-width:220px">
          <h4>Danh mแปฅc</h4>
          <div style="margin-bottom:8px">
            <input id="new-cat-name" placeholder="Danh mแปฅc" />
            <button class="btn btn-secondary" onclick="addCategory()">Thรชm DM</button>
          </div>
          <ul id="categories-list" class="cart-list"></ul>
        </div>
        <div style="flex:2;min-width:260px">
          <h4>Quแบฃn lรฝ Mรณn</h4>
          <div style="display:flex;gap:6px;align-items:center;margin-bottom:8px">
            <select id="cat-select"></select>
            <input id="new-item-name" placeholder="Tรชn mรณn" />
            <input id="new-item-price" placeholder="Giรก" type="number" />
            <button class="btn btn-primary" onclick="addMenuItem()">Thรชm mรณn</button>
          </div>
          <ul id="menu-settings-list" class="cart-list"></ul>
        </div>
      </div>
    </main>

    <main id="printer-settings-screen" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Cรi ฤแบทt Mรกy in</h2>
        <button class="btn btn-light" onclick="openSettings()">โ Quay lแบกi</button>
      </div>
      <div style="margin-top:8px">
        <label>Khแป giแบฅy:
          <select id="paper-size">
            <option value="58">58mm</option>
            <option value="80">80mm</option>
          </select>
        </label><br/>
        <label><input type="checkbox" id="print-name" checked> In tรชn quรกn</label><br/>
        <button class="btn btn-primary" onclick="printTest()">In thแปญ</button>
      </div>
    </main>

    <main id="history-screen" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2>Lแปch sแปญ</h2>
        <div style="display:flex;gap:8px;align-items:center">
          <input type="date" id="history-date" />
          <button class="btn btn-secondary" onclick="clearDateFilter()">Xรณa</button>
          <button class="btn btn-light" onclick="backToTables()">โ Quay lแบกi</button>
        </div>
      </div>
      <div id="history-container" style="margin-top:8px"></div>
    </main>

  </div>

  <script src="app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const b = document.getElementById('brand');
      if(b) b.addEventListener('click', ()=>{ backToTables(); });
    });
  </script>
</body>
</html>
